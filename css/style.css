@import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');

:root {
    --bg-dark: #02060f;
    --bg-gradient-start: #0c1527;
    --card-bg: rgba(15, 23, 42, 0.75);
    --card-border: rgba(148, 163, 184, 0.2);
    --accent: #38bdf8;
    --accent-hover: #67cff9;
    --text-light: #f1f5f9;
    --text-normal: #e2e8f0;
    --text-muted: #a8b9d0;
    --font-sans: 'Kanit', sans-serif;
    --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
}

body.index-landing {
    font-family: var(--font-sans);
    min-height: 100vh;
    background-color: var(--bg-dark);
    background-image: radial-gradient(circle at 50% 0%, var(--bg-gradient-start) 0%, var(--bg-dark) 40%);
    color: var(--text-normal);
    display: flex;
    flex-direction: column;
    letter-spacing: 0.5px;
    overflow-x: hidden; /* Prevent horizontal scroll from effects */
}

/* --- Text Color Fixes -- */
.hub-title, .user-welcome, .text-light { color: var(--text-light) !important; }
.hub-lead, .text-muted { color: var(--text-muted) !important; }

/* --- Main Hub / CTA --- */
.hub-container {
    max-width: 700px;
    margin: 0 auto;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 1.5rem;
    padding: 2.5rem;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(20px);
}

/* --- Logged-in User Hub --- */
.profile-summary {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.25rem;
    margin-top: 1.5rem;
}

.profile-avatar {
    width: 80px;
    height: 80px;
    max-width: 80px; /* Strict max size */
    max-height: 80px; /* Strict max size */
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--card-border);
    flex-shrink: 0;
}

/* Avatar frame used on index */
.avatar-frame{
    position: relative;
    width: 96px;
    height: 96px;
    border-radius: 50%;
    display:inline-flex;
    align-items:center;
    justify-content:center;
}
.avatar-frame .profile-avatar{ width:88px;height:88px;border-width:3px; }
.avatar-glow{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:120px; height:120px; border-radius:50%; pointer-events:none; filter:blur(18px); opacity:0.55; background: radial-gradient(circle at 30% 30%, rgba(56,189,248,0.18), transparent 35%), radial-gradient(circle at 70% 70%, rgba(99,102,241,0.08), transparent 35%); z-index:-1; }
.clickable-avatar:hover{ transform: translateY(-4px); transition: transform 180ms ease; box-shadow: 0 12px 30px rgba(2,6,15,0.45); }

/* Decorative floating blobs behind the hub container */
.hub-decor{ position:absolute; inset:0; pointer-events:none; z-index:0; }
.hub-decor .blob{ position:absolute; border-radius:50%; filter: blur(40px); opacity:0.12; }
.hub-decor .blob-1{ width:320px; height:320px; left:-80px; top:-120px; background: linear-gradient(135deg, rgba(56,189,248,0.45), rgba(14,165,233,0.25)); }
.hub-decor .blob-2{ width:220px; height:220px; right:-60px; top:-60px; background: linear-gradient(135deg, rgba(99,102,241,0.34), rgba(139,92,246,0.18)); }
.hub-decor .blob-3{ width:160px; height:160px; left:40%; bottom:-40px; background: linear-gradient(135deg, rgba(236,72,153,0.18), rgba(245,158,11,0.12)); }

/* Ensure hub container stacks above decor */
.hub-container{ position:relative; z-index:1; }

/* Defensive fixes: ensure avatar never blocks layout or captures unintended events */
.avatar-frame{ z-index:2; /* above blobs but below modals */
    pointer-events: auto; /* allow clicks only on avatar itself */
}
.avatar-frame .profile-avatar{
    max-width: 88px;
    max-height: 88px;
    width: auto;
    height: auto;
    display:block;
}
.clickable-avatar{ touch-action: manipulation; }

/* Prevent any decorative blob from catching pointer events (extra safety) */
.hub-decor .blob{ pointer-events: none; }

/* Mobile: shrink avatar to avoid covering content */
@media (max-width: 480px){
    .avatar-frame{ width:72px; height:72px; }
    .avatar-frame .profile-avatar{ max-width:64px; max-height:64px; }
    .avatar-glow{ width:96px; height:96px; filter:blur(14px); }
}

/* Other styles... */

/* --- Restored Effects CSS --- */
.trail-particle {
    position: fixed;
    width: 10px;
    height: 10px;
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: 50%;
    pointer-events: none;
    transform: translate(-50%, -50%);
    animation: fade-out-particle 0.8s ease-out forwards;
    z-index: 9998;
}

@keyframes fade-out-particle {
    from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    to { transform: translate(-50%, -50%) scale(0); opacity: 0; }
}

.click-ripple {
    position: fixed;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.8);
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 9999;
    animation: ripple-effect 0.6s ease-out;
}

@keyframes ripple-effect {
    from { width: 0; height: 0; opacity: 1; }
    to { width: 80px; height: 80px; opacity: 0; }
}
/* --- End Effects CSS --- */

/* Other styles from previous version are assumed to be here */
.navbar-custom{background:rgba(9,13,23,0.65);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid var(--card-border)}.main-hub{padding:4rem 0;text-align:center}.rank-badge{display:inline-flex;align-items:center;gap:.4rem;border-radius:999px;padding:.5rem 1.1rem;font-size:.9rem;background:linear-gradient(135deg,var(--accent),#0ea5e9);color:#0f172a;font-weight:600}#rewards-widget{text-align:left;margin:2rem 0;padding:1.5rem;background:rgba(0,0,0,0.2);border-radius:1rem}.action-buttons .btn{border-radius:.75rem;padding:1rem 1.75rem;font-weight:600;font-size:1.1rem;transition:all .2s ease}.btn-primary{background:var(--accent);border-color:var(--accent);color:var(--bg-dark)}.btn-primary:hover{background:var(--accent-hover);border-color:var(--accent-hover);transform:translateY(-3px);box-shadow:0 7px 20px rgba(56,189,248,.2)}footer{margin-top:auto;padding:2.5rem 0;color:var(--text-muted);text-align:center;font-size:.9rem}

@media (max-width:767px){.main-hub{padding:2rem 0}.hub-container{padding:2rem 1.5rem;border-radius:1rem}.profile-summary{flex-direction:column}.action-buttons{flex-direction:column}.action-buttons .btn{width:100%}}
@media (max-width:480px){.profile-avatar{width:64px;height:64px;max-width:64px;max-height:64px}.hub-container{padding:1.5rem}}